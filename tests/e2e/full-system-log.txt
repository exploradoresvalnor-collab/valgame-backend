  console.log
    [API] Modo test: no se inicia conexi√≥n autom√°tica a MongoDB ni servidor HTTP.

      at Object.<anonymous> (src/app.ts:169:11)

  console.log
    [DB] Conectado a MongoDB

      at connectDB (src/config/db.ts:12:11)

  console.log
    [MAILER] Usando cuenta de prueba de Ethereal (no necesitas credenciales).

      at createTransporter (src/config/mailer.ts:23:13)

  console.log
    [MAILER] Correo de prueba enviado. Vista previa disponible en: https://ethereal.email/message/aPaNDIw8PbMuA2puaPaNDlPQQmY65YtNAAAAAaOqjdi3JtVO2U8IgVuA42U

      at sendVerificationEmail (src/config/mailer.ts:84:13)

  console.warn
    RealtimeService no disponible, skip notify (listItem) RealtimeService no ha sido inicializado

    [0m [90m 145 |[39m       } [36mcatch[39m (err) {
     [90m 146 |[39m         [90m// En entorno de tests el RealtimeService puede no estar inicializado; loguear y continuar[39m
    [31m[1m>[22m[39m[90m 147 |[39m         console[33m.[39mwarn([32m'RealtimeService no disponible, skip notify (listItem)'[39m[33m,[39m (err [36mas[39m any)[33m?[39m[33m.[39mmessage [33m||[39m err)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 148 |[39m       }
     [90m 149 |[39m     }
     [90m 150 |[39m[0m

      at Object.listItem (src/services/marketplace.service.ts:147:17)
      at src/routes/marketplace.routes.ts:51:21

  console.error
    Error al comprar item: ValidationError: No puedes comprar tu propio item
        at C:\Users\Haustman\Desktop\valgame-backend\src\services\marketplace.service.ts:286:15
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at ClientSession.withTransaction (C:\Users\Haustman\Desktop\valgame-backend\node_modules\mongodb\src\sessions.ts:750:20)
        at Object.buyItem (C:\Users\Haustman\Desktop\valgame-backend\src\services\marketplace.service.ts:264:19)
        at C:\Users\Haustman\Desktop\valgame-backend\src\routes\marketplace.routes.ts:95:20 {
      statusCode: 400,
      isOperational: true
    }

    [0m [90m 377 |[39m     [36mreturn[39m { success[33m:[39m [36mtrue[39m[33m,[39m transaction[33m:[39m listing }[33m;[39m
     [90m 378 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 379 |[39m     console[33m.[39merror([32m'Error al comprar item:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 380 |[39m     [36mthrow[39m error[33m;[39m
     [90m 381 |[39m   } [36mfinally[39m {
     [90m 382 |[39m     session[33m.[39mendSession()[33m;[39m[0m

      at Object.buyItem (src/services/marketplace.service.ts:379:13)
      at src/routes/marketplace.routes.ts:95:20

  console.error
    
    ==================== UNHANDLED ERROR ====================

    [0m [90m  6 |[39m
     [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
    [31m[1m>[22m[39m[90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:8:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    [2025-10-20T19:27:11.783Z] POST /api/marketplace/listings/68f68d0f624e1ada14c9d41a/buy

    [0m [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
     [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   [0m

      at errorHandler (src/middlewares/errorHandler.ts:9:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    Error Message: No puedes comprar tu propio item

    [0m [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:10:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    Error Status: 400

    [0m [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
    [31m[1m>[22m[39m[90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {[0m

      at errorHandler (src/middlewares/errorHandler.ts:11:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    Stack Trace:

    [0m [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
    [31m[1m>[22m[39m[90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:15:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    Error: No puedes comprar tu propio item
        at C:\Users\Haustman\Desktop\valgame-backend\src\services\marketplace.service.ts:286:15
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at ClientSession.withTransaction (C:\Users\Haustman\Desktop\valgame-backend\node_modules\mongodb\src\sessions.ts:750:20)
        at Object.buyItem (C:\Users\Haustman\Desktop\valgame-backend\src\services\marketplace.service.ts:264:19)
        at C:\Users\Haustman\Desktop\valgame-backend\src\routes\marketplace.routes.ts:95:20

    [0m [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
     [90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m
     [90m 19 |[39m   }[0m

      at errorHandler (src/middlewares/errorHandler.ts:16:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.error
    =========================================================

    [0m [90m 19 |[39m   }
     [90m 20 |[39m   
    [31m[1m>[22m[39m[90m 21 |[39m   console[33m.[39merror([32m'=========================================================\n'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 22 |[39m
     [90m 23 |[39m   [90m// No enviar el stack trace en producci√≥n[39m
     [90m 24 |[39m   [36mconst[39m errorResponse [33m=[39m {[0m

      at errorHandler (src/middlewares/errorHandler.ts:21:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at src/routes/marketplace.routes.ts:98:5

  console.warn
    RealtimeService no disponible, skip notify (cancelListing) RealtimeService no ha sido inicializado

    [0m [90m 245 |[39m           }
     [90m 246 |[39m         } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 247 |[39m           console[33m.[39mwarn([32m'RealtimeService no disponible, skip notify (cancelListing)'[39m[33m,[39m (err [36mas[39m any)[33m?[39m[33m.[39mmessage [33m||[39m err)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 248 |[39m         }
     [90m 249 |[39m       }
     [90m 250 |[39m     }[0m

      at Object.cancelListing (src/services/marketplace.service.ts:247:19)
      at src/routes/marketplace.routes.ts:108:20

  console.error
    
    ==================== UNHANDLED ERROR ====================

    [0m [90m  6 |[39m
     [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
    [31m[1m>[22m[39m[90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:8:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    [2025-10-20T19:27:12.434Z] POST /auth/login

    [0m [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
     [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   [0m

      at errorHandler (src/middlewares/errorHandler.ts:9:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Message: Demasiadas peticiones

    [0m [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:10:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Status: 429

    [0m [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
    [31m[1m>[22m[39m[90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {[0m

      at errorHandler (src/middlewares/errorHandler.ts:11:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Stack Trace:

    [0m [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
    [31m[1m>[22m[39m[90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:15:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error: Demasiadas peticiones
        at Object.handleRateLimit [as handler] (C:\Users\Haustman\Desktop\valgame-backend\src\middlewares\rateLimits.ts:71:8)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:804:16
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:691:5

    [0m [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
     [90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m
     [90m 19 |[39m   }[0m

      at errorHandler (src/middlewares/errorHandler.ts:16:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    =========================================================

    [0m [90m 19 |[39m   }
     [90m 20 |[39m   
    [31m[1m>[22m[39m[90m 21 |[39m   console[33m.[39merror([32m'=========================================================\n'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 22 |[39m
     [90m 23 |[39m   [90m// No enviar el stack trace en producci√≥n[39m
     [90m 24 |[39m   [36mconst[39m errorResponse [33m=[39m {[0m

      at errorHandler (src/middlewares/errorHandler.ts:21:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    
    ==================== UNHANDLED ERROR ====================

    [0m [90m  6 |[39m
     [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
    [31m[1m>[22m[39m[90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:8:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    [2025-10-20T19:27:12.514Z] POST /auth/login

    [0m [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
     [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   [0m

      at errorHandler (src/middlewares/errorHandler.ts:9:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Message: Demasiadas peticiones

    [0m [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:10:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Status: 429

    [0m [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
    [31m[1m>[22m[39m[90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {[0m

      at errorHandler (src/middlewares/errorHandler.ts:11:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Stack Trace:

    [0m [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
    [31m[1m>[22m[39m[90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:15:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error: Demasiadas peticiones
        at Object.handleRateLimit [as handler] (C:\Users\Haustman\Desktop\valgame-backend\src\middlewares\rateLimits.ts:71:8)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:804:16
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:691:5

    [0m [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
     [90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m
     [90m 19 |[39m   }[0m

      at errorHandler (src/middlewares/errorHandler.ts:16:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    =========================================================

    [0m [90m 19 |[39m   }
     [90m 20 |[39m   
    [31m[1m>[22m[39m[90m 21 |[39m   console[33m.[39merror([32m'=========================================================\n'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 22 |[39m
     [90m 23 |[39m   [90m// No enviar el stack trace en producci√≥n[39m
     [90m 24 |[39m   [36mconst[39m errorResponse [33m=[39m {[0m

      at errorHandler (src/middlewares/errorHandler.ts:21:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.warn
    [RATE_LIMIT_ALERT] IP ::ffff:127.0.0.1 ha excedido l√≠mites 3 veces en la √∫ltima hora

    [0m [90m 49 |[39m     [36mif[39m (record[33m.[39mattempts [33m>=[39m [33mALERT_THRESHOLD[39m) {
     [90m 50 |[39m       record[33m.[39mwarnings[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 51 |[39m       console[33m.[39mwarn([32m`[RATE_LIMIT_ALERT] IP ${ip} ha excedido l√≠mites ${record.attempts} veces en la √∫ltima hora`[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 52 |[39m       
     [90m 53 |[39m       [90m// Aqu√≠ podr√≠as integrar con un sistema de monitoreo externo[39m
     [90m 54 |[39m       [36mif[39m (process[33m.[39menv[33m.[39m[33mMONITORING_WEBHOOK[39m) {[0m

      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:51:15)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    
    ==================== UNHANDLED ERROR ====================

    [0m [90m  6 |[39m
     [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
    [31m[1m>[22m[39m[90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:8:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    [2025-10-20T19:27:12.610Z] POST /auth/login

    [0m [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
     [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   [0m

      at errorHandler (src/middlewares/errorHandler.ts:9:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Message: Demasiadas peticiones

    [0m [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:10:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Status: 429

    [0m [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
    [31m[1m>[22m[39m[90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {[0m

      at errorHandler (src/middlewares/errorHandler.ts:11:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Stack Trace:

    [0m [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
    [31m[1m>[22m[39m[90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:15:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error: Demasiadas peticiones
        at Object.handleRateLimit [as handler] (C:\Users\Haustman\Desktop\valgame-backend\src\middlewares\rateLimits.ts:71:8)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:804:16
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:691:5

    [0m [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
     [90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m
     [90m 19 |[39m   }[0m

      at errorHandler (src/middlewares/errorHandler.ts:16:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    =========================================================

    [0m [90m 19 |[39m   }
     [90m 20 |[39m   
    [31m[1m>[22m[39m[90m 21 |[39m   console[33m.[39merror([32m'=========================================================\n'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 22 |[39m
     [90m 23 |[39m   [90m// No enviar el stack trace en producci√≥n[39m
     [90m 24 |[39m   [36mconst[39m errorResponse [33m=[39m {[0m

      at errorHandler (src/middlewares/errorHandler.ts:21:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.warn
    [RATE_LIMIT_ALERT] IP ::ffff:127.0.0.1 ha excedido l√≠mites 4 veces en la √∫ltima hora

    [0m [90m 49 |[39m     [36mif[39m (record[33m.[39mattempts [33m>=[39m [33mALERT_THRESHOLD[39m) {
     [90m 50 |[39m       record[33m.[39mwarnings[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 51 |[39m       console[33m.[39mwarn([32m`[RATE_LIMIT_ALERT] IP ${ip} ha excedido l√≠mites ${record.attempts} veces en la √∫ltima hora`[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 52 |[39m       
     [90m 53 |[39m       [90m// Aqu√≠ podr√≠as integrar con un sistema de monitoreo externo[39m
     [90m 54 |[39m       [36mif[39m (process[33m.[39menv[33m.[39m[33mMONITORING_WEBHOOK[39m) {[0m

      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:51:15)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    
    ==================== UNHANDLED ERROR ====================

    [0m [90m  6 |[39m
     [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
    [31m[1m>[22m[39m[90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:8:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    [2025-10-20T19:27:12.700Z] POST /auth/login

    [0m [90m  7 |[39m   [90m// Log detallado para depuraci√≥n[39m
     [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   [0m

      at errorHandler (src/middlewares/errorHandler.ts:9:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Message: Demasiadas peticiones

    [0m [90m  8 |[39m   console[33m.[39merror([32m'\n==================== UNHANDLED ERROR ===================='[39m)[33m;[39m
     [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:10:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error Status: 429

    [0m [90m  9 |[39m   console[33m.[39merror([32m`[${new Date().toISOString()}] ${req.method} ${req.originalUrl}`[39m)[33m;[39m
     [90m 10 |[39m   console[33m.[39merror([32m'Error Message:'[39m[33m,[39m message)[33m;[39m
    [31m[1m>[22m[39m[90m 11 |[39m   console[33m.[39merror([32m'Error Status:'[39m[33m,[39m status)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 12 |[39m   
     [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {[0m

      at errorHandler (src/middlewares/errorHandler.ts:11:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Stack Trace:

    [0m [90m 13 |[39m   [90m// Imprimir el stack trace si est√° disponible[39m
     [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
    [31m[1m>[22m[39m[90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m[0m

      at errorHandler (src/middlewares/errorHandler.ts:15:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    Error: Demasiadas peticiones
        at Object.handleRateLimit [as handler] (C:\Users\Haustman\Desktop\valgame-backend\src\middlewares\rateLimits.ts:71:8)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:804:16
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\Haustman\Desktop\valgame-backend\node_modules\express-rate-limit\dist\index.cjs:691:5

    [0m [90m 14 |[39m   [36mif[39m (err[33m.[39mstack) {
     [90m 15 |[39m     console[33m.[39merror([32m'Stack Trace:'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39merror(err[33m.[39mstack)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 17 |[39m   } [36melse[39m {
     [90m 18 |[39m     console[33m.[39merror([32m'Full Error Object:'[39m[33m,[39m err)[33m;[39m
     [90m 19 |[39m   }[0m

      at errorHandler (src/middlewares/errorHandler.ts:16:13)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.error
    =========================================================

    [0m [90m 19 |[39m   }
     [90m 20 |[39m   
    [31m[1m>[22m[39m[90m 21 |[39m   console[33m.[39merror([32m'=========================================================\n'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 22 |[39m
     [90m 23 |[39m   [90m// No enviar el stack trace en producci√≥n[39m
     [90m 24 |[39m   [36mconst[39m errorResponse [33m=[39m {[0m

      at errorHandler (src/middlewares/errorHandler.ts:21:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Object.handleRateLimit [as handler] (src/middlewares/rateLimits.ts:71:3)
      at node_modules/express-rate-limit/dist/index.cjs:804:16
      at node_modules/express-rate-limit/dist/index.cjs:691:5

  console.log
    [DB] Desconectado de MongoDB

      at disconnectDB (src/config/db.ts:21:11)

